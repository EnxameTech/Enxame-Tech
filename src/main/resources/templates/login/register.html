<!DOCTYPE html>
<html lang="PT-br">
<head>
    <link
            href="/css/bootstrap4/bootstrap.min.css"
            rel="stylesheet"
            type="text/css"
    />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.18.0/font/bootstrap-icons.css" rel="stylesheet">
    <link
            href="/css/plugins/fontawesome-free-5.0.1/css/fontawesome-all.css"
            rel="stylesheet"
            type="text/css"
    />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.18.0/font/bootstrap-icons.css" rel="stylesheet">
    <link
            href="/plugins/OwlCarousel2-2.2.1/owl.carousel.css"
            rel="stylesheet"
            type="text/css"
    />
    <link
            href="/plugins/OwlCarousel2-2.2.1/owl.theme.default.css"
            rel="stylesheet"
            type="text/css"
    />
    <link
            href="/plugins/OwlCarousel2-2.2.1/animate.css"
            rel="stylesheet"
            type="text/css"
    />
    <link href="/img/favicon.ico" rel="shortcut icon" type="image/x-icon">

    <link href="/css/login.css" rel="stylesheet" type="text/css"/>
    <!--    <link rel="stylesheet" type="text/css" href="/css/loading.css" />-->
    <link href="/css/register.css" rel="stylesheet" type="text/css"/>

    <meta charset="UTF-8"/>

    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Enxame Tech | Cadastro Usuário</title>
</head>
<body>

<!--Login-->
<div class="container-login">
    <div class="img-box">
        <img
                alt="imagem de comeia de abelha"
                src="/img/login_background.jpg"
        />
    </div>
    <!-- inputs-login -->
    <div class="content-box">
        <div class="form-box">
            <h2>Faça seu Cadastro</h2>

            <div class="progress-bar">
                <div class="progress" id="progress">
                </div>
                <div class="progress-content">
                    <div class="progress-step progress-step-active"></div>
                    <div class="progress-step "></div>
                    <div class="progress-step "></div>
                    <div class="progress-step "></div>
                    <div class="progress-step "></div>
                </div>
            </div>

            <form id="form">

                <!-- step-1 -->
                <div class="form-step  form-step-active row ">
                    <div class="form-group col-12">
                        <label for="cpf">CPF</label>
                        <input class="inputs required cpf" id="cpf" name="cpf" oninput="cpfValidate()" placeholder="Somente números"
                               type="text">
                        <span class="span-required">Campo obrigátorio</span>
                    </div>
                    <div class="form-group col-12">
                        <label for="nome_completo">Nome Completo</label>
                        <input class="inputs required" id="nome_completo" name="nome_completo" oninput="nomeValidate()"
                               placeholder="Nome"
                               type="text">
                        <span class="span-required">Campo obrigátorio</span>
                    </div>


                    <div class="row justify-content-center mt-4">
                        <input class="col-3 btn-next" href="#" value="Próximo">
                    </div>

                </div>

                <!-- step-3 -->
                <div class="row form-step ">
                    <div class="form-group col-12">
                        <label for="data_nascimento">Data de Nascimento</label>
                        <input class="inputs required" id="data_nascimento" name="data_nascimento" type="date">
                        <span class="span-required">Campo obrigátorio</span>
                    </div>
                    <div class="form-group col-12">
                        <label for="email">E-mail</label>
                        <input class="inputs required" id="email" name="email" oninput="emailCheck()" placeholder="seuemail@dominio.com"
                               type="email">
                        <span class="span-required">Digite um e-mail válido</span>
                    </div>
                    <div class="form-group col-12">
                        <label for="senha">Senha</label>
                        <input class="inputs required" id="senha" name="senha" oninput="password()" placeholder="mínimo 6 caracteres"
                               type="password">
                        <span class="span-required">Minimo caracteres</span>
                    </div>

                    <div class="row justify-content-center mt-4">
                        <input class="col-3 btn-prev" href="#" value="Voltar">
                        <input class="col-3 btn-next" href="#" value="Próximo">
                    </div>
                </div>
                <!-- step -4 -->
                <div class="row form-step ">
                    <div class="form-group col-12">
                        <label for="genero">Gênero</label>
                        <select class="input" id="genero" name="genero">
                            <option th:each="genero : ${generos}" th:text="${genero.getDescricao()}"
                                    th:value="${genero}">
                            </option>
                        </select>
                        <span class="span-required">Campo obrigátorio</span>
                    </div>
                    <div class="form-group col-12">
                        <label for="telefone">Telefone</label>
                        <input class="inputs required" id="telefone" name="telefone" oninput="tel()" placeholder="(XX) XXXXX-XXXX"
                               type="tel">
                        <span class="span-required">Campo obrigátorio</span>
                    </div>
                    <div class="row justify-content-center mt-4">
                        <input class="col-4 btn-prev" href="#" value="Voltar">
                        <input class="col-4 btn-next" href="#" value="Próximo">
                    </div>
                </div>


                <!-- step-5 -->
                <div class="row form-step ">
                    <div class="row">
                        <div class="form-group col-4">
                            <label for="cep">CEP</label>
                            <input class="inputs required" id="cep" name="cep" placeholder="CEP" type="text">
                            <span class="span-required">Campo obrigátorio</span>
                        </div>
                        <div class="form-group col-8">
                            <label for="rua">Rua</label>
                            <input class="inputs required" id="rua" name="rua" type="text">
                            <span class="span-required">Campo obrigátorio</span>
                        </div>

                    </div>

                    <div class="row">
                        <div class="form-group col-3">
                            <label for="numero">Número</label>
                            <input class="inputs required" id="numero" name="numero" placeholder="nº" type="text">
                            <span class="span-required">Campo obrigátorio</span>
                        </div>

                        <div class="form-group col-9">
                            <label for="bairro">Bairro</label>
                            <input class="inputs required" id="bairro" name="bairro" type="text">
                            <span class="span-required">Campo obrigátorio</span>
                        </div>


                    </div>


                    <div class="row">


                        <div class="form-group col-7">
                            <label for="cidade">Cidade</label>
                            <input class="inputs required" id="cidade" name="cidade" type="text">
                            <span class="span-required">Campo obrigátorio</span>
                        </div>

                        <div class="form-group col-5">
                            <label for="uf">UF:</label>
                            <input class="inputs required" id="uf" name="uf" type="text">
                            <span class="span-required">Campo obrigátorio</span>
                        </div>
                    </div>

                    <div class="row justify-content-center mt-4">
                        <input class="col-4 btn-prev" href="#" value="Voltar ">
                        <input class="col-4 btn-next" href="#" value="Próximo">

                    </div>
                </div>

                <div class="row form-step ">


                    <div class="form-group col-12">
                        <label for="grupo_familiar">Quantidade de Pessoas no Grupo Familiar</label>
                        <input class="inputs required" id="grupo_familiar" name="grupo_familiar" placeholder="Informe quantas pessoas moram com você"
                               type="text">
                        <span class="span-required">grupo_familiar</span>
                    </div>

                    <div class="form-group col-12">
                        <label for="renda_familiar">Renda Familiar</label>
                        <input class="inputs required" id="renda_familiar" name="renda_familiar" placeholder="Some a renda de todos os integrantes da família"
                               type="text">
                        <span class="span-required">renda_familiar</span>
                    </div>


                    <div class="row justify-content-center">
                        <input class="col-4 btn-prev" href="#" value="Voltar">
                        <button class="btn-prev col-4 cadastro" onclick="cadastrar()" type="button">Cadastrar</button>
                    </div>
                </div>

                <a class="voltar-link " th:href="@{/login}">Voltar para a Login</a>
            </form>


        </div>
    </div>

</div>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<script type="text/javascript">
    async function cadastrar() {
        try {
            const formDataArray = $("#form").serializeArray();

            const formData = {};
            formDataArray.forEach((item) => {
                formData[item.name] = item.value;
            });

            const response = await axios.post("/aluno/cadastrar", formData);

            alert("Aluno adicionado com sucesso!");
            window.location.href = "/dashboard";
        } catch (error) {
            alert("Erro ao cadastrar: " + error.response.data);
        }
    }
</script>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.js"></script>
<script src="/js/input-validation-cadastar-aluno.js"></script>
<script src="/js/cadastra-alunos.js"></script>
<script src="/js/maskInput.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js">
</script>
<script src="/js/input-validation-cadastar-aluno.js">
</script>
<script src="/js/cadastra-alunos.js"></script>
<script src="/js/apiCep.js"></script>

</body>
</html>
